const data = require('../../lib/data');
const {}

const handler = {};

handler.userHandler = (requestProperties, callback) => {
    const acceptMethods = ['get', 'post', 'put', 'delete'];
    if(acceptMethods.indexOf(requestProperties.method) > -1){
        handler._users[requestProperties.method](requestProperties, callback);

    }  else {
        callback(405);
    }

  handler._users ={};
  handler._users.get = (requestProperties, callback) => {

    const firstName = typeof(requestProperties.body.firstName) === 'string' &&  requestProperties.body.firstName
    .trim().length > 0 ? requestProperties.body.firstName : false;

    const lastName = typeof(requestProperties.body.lastName) === 'string' &&  requestProperties.body.firstName
    .trim().length > 0 ? requestProperties.body.lastName : false;
 
    const phone = typeof(requestProperties.body.phone) === 'string' &&  requestProperties.body.firstName
    .trim().length > 0 ? requestProperties.body.phone : false;

    const password = typeof(requestProperties.body.password) === 'string' &&  requestProperties.body.firstName
    .trim().length > 0 ? requestProperties.body.password : false;

 
    const toAgreement = typeof(requestProperties.body.toAgreement) === 'boolean' &&  requestProperties.body.firstName
    .trim().length > 0 ? requestProperties.body.toAgreement : false;

   if(firstName && lastName && phone && toAgreement ) {
     data.read('users', 'phone', (err, user) => {
      if(err) 
      {
       let userObject = {
          firstName,
          lastName,
          phone,
       }
      }
      else{
        callback(500, {
           error : 'There was a problem in server side';    
        });
      }
     })
   } else {
     callback(400, {
         error : 'You hava a problem in  your request',
     })
   }


  };

  handler._users.post = (requestProperties, callback) => {

 };
  handler._users.put = (requestProperties, callback) => {

};
  handler._users.delete = (requestProperties, callback) => {

};


    callback(200, {
        message: 'This is a user url',
    });
};

module.exports = handler;